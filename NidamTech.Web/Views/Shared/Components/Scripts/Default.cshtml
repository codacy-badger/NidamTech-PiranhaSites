@using Web.Models.Regions.SiteRegions
@using Web.Models.Sites
@inject Piranha.IApi Api;
@{
    SiteAppearance siteAppearance = null;
    if (Api.Sites.GetContentByIdAsync<DefaultSite>(WebApp.Site.Id).Result != null)
    {
        siteAppearance = Api.Sites.GetContentByIdAsync<DefaultSite>(WebApp.Site.Id).Result.Appearance;
    }
    string selectedTheme;
    if (siteAppearance == null || string.IsNullOrEmpty(siteAppearance.SelectedTheme.EnumValue))
    {
        selectedTheme = "default-theme.bundle.js";
    }
    else
    {
        selectedTheme = siteAppearance.SelectedTheme.EnumValue + "-theme.bundle.js";
    }
}
<script src="base.bundle.js"></script>
<script src=@selectedTheme defer></script>