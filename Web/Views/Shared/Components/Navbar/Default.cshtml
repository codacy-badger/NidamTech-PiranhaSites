@using Web.Models

@inject Piranha.IApi Api;
@{
    var sitemap = WebApp.Site.Sitemap;
    var siteAppearance = Api.Sites.GetContentById<DefaultSite>(WebApp.Site.Id).Appearance;
    var logoUrl = siteAppearance.Logo;
    var darkMode = siteAppearance.DarkMode.Value;
}
@* TODO: make bootstrap theme, theme dependent *@
<nav class="navbar navbar-expand-sm @(darkMode ? "bg-dark navbar-dark" : "bg-light navbar-light") fixed-top">
    <div class="container">
        <a class="navbar-brand" href="/">
            <img src=@(!string.IsNullOrEmpty(logoUrl) ? logoUrl.Media.PublicUrl : "") alt="Logo">
        </a>
        <div class="collapse navbar-collapse" id="collapsibleNavbar">
            <ul class="navbar-nav ml-auto">
                @foreach (var item in sitemap)
                {
                    <li class="nav-item @(item.Id == WebApp.PageId ? "active" : "")">
                        <a class="nav-link" href="@item.Permalink">
                            <span>@item.MenuTitle</span>
                        </a>
                    </li>
                }
            </ul>
        </div>
        <button class="navbar-toggler col-sm-12" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
            <span class="navbar-toggler-icon"></span>
        </button>
    </div>
</nav>